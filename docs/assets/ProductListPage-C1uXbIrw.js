import{u as A}from"./products-BKFawb0D.js";import{u as L}from"./cart-CJEGNyfA.js";import{u as z}from"./favorites-D7N2Ia4P.js";import{e as E,a7 as I,d as p,l as M,a8 as G,j as H,a9 as J,B as i,R as n,S as l,y as a,u as r,aa as g,U as x,a1 as C,D as K,ab as O,a6 as h,F as Q}from"./vue-CsJlAH0e.js";import{c as F,f as R,V,h as b,i as W,j as X,a as T,k as Y,l as Z,m as ee,b as ae,n as te,d as le,e as P,o as oe,p as se,g as re}from"./index-CdcGRsAc.js";import"./vuetify-BpRWpd-r.js";const ue={class:"d-flex align-center justify-space-between"},ie={class:"text-h6"},ge=E({__name:"ProductListPage",setup(ne){const w=G(),N=J(),d=A(),U=L(),B=z(),{paginatedProducts:$,loading:_,error:y,categories:j,totalPages:k}=I(d),m=p(""),c=p(""),o=p([0,1e3]),u=p(1);M(async()=>{const{title:s,category:t,minPrice:e,maxPrice:f,page:S}=w.query;s&&(m.value=s),t&&(c.value=t),e&&(o.value[0]=Number(e)),f&&(o.value[1]=Number(f)),S&&(u.value=Number(S)),await Promise.all([d.fetchProducts(),d.fetchCategories()])});const D=s=>{U.addToCart(s)},q=s=>{B.toggleFavorite(s)},v=()=>{N.push({query:{title:m.value||void 0,category:c.value||void 0,minPrice:o.value[0]||void 0,maxPrice:o.value[1]||void 0,page:u.value>1?u.value:void 0}}),d.updateFilter({title:m.value,category:c.value,minPrice:o.value[0],maxPrice:o.value[1],page:u.value})};return H(u,s=>{d.setPage(s),v()}),(s,t)=>(i(),n(re,null,{default:l(()=>[a(T,{class:"mb-6"},{default:l(()=>[a(F,null,{default:l(()=>[a(R,null,{default:l(()=>[a(V,{cols:"12",sm:"4"},{default:l(()=>[a(b,{modelValue:m.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>m.value=e),v],label:"Search products","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),a(V,{cols:"12",sm:"4"},{default:l(()=>[a(W,{modelValue:c.value,"onUpdate:modelValue":[t[1]||(t[1]=e=>c.value=e),v],items:r(j),label:"Category",variant:"outlined",density:"comfortable","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),a(V,{cols:"12",sm:"4"},{default:l(()=>[a(X,{modelValue:o.value,"onUpdate:modelValue":[t[4]||(t[4]=e=>o.value=e),v],min:0,max:1e3,step:10,label:"Price range","hide-details":""},{prepend:l(()=>[a(b,{modelValue:o.value[0],"onUpdate:modelValue":t[2]||(t[2]=e=>o.value[0]=e),type:"number",variant:"outlined",density:"comfortable","hide-details":"",style:{width:"100px"}},null,8,["modelValue"])]),append:l(()=>[a(b,{modelValue:o.value[1],"onUpdate:modelValue":t[3]||(t[3]=e=>o.value[1]=e),type:"number",variant:"outlined",density:"comfortable","hide-details":"",style:{width:"100px"}},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),r(_)?(i(),n(Y,{key:0,indeterminate:"",color:"primary",class:"d-flex mx-auto my-8"})):g("",!0),r(y)?(i(),n(Z,{key:1,type:"error",class:"mb-6"},{default:l(()=>[x(C(r(y)),1)]),_:1})):g("",!0),!r(_)&&!r(y)?(i(),n(R,{key:2},{default:l(()=>[(i(!0),K(Q,null,O(r($),e=>(i(),n(V,{key:e.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(()=>[a(T,null,{default:l(()=>[a(ee,{src:e.image,height:"200",cover:"",class:"bg-grey-lighten-2"},null,8,["src"]),a(ae,{class:"text-truncate"},{default:l(()=>[x(C(e.title),1)]),_:2},1024),a(F,null,{default:l(()=>[h("div",ue,[h("span",ie,"$"+C(e.price),1),a(te,{"model-value":e.rating.rate,readonly:"",density:"compact",size:"small"},null,8,["model-value"])])]),_:2},1024),a(le,null,{default:l(()=>[a(P,{variant:"text",to:`/products/${e.id}`},{default:l(()=>t[6]||(t[6]=[x(" Details ")])),_:2},1032,["to"]),a(oe),a(P,{icon:"mdi-heart",variant:"text",onClick:f=>q(e)},null,8,["onClick"]),a(P,{icon:"mdi-cart",variant:"text",onClick:f=>D(e)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):g("",!0),r(k)>1?(i(),n(se,{key:3,modelValue:u.value,"onUpdate:modelValue":t[5]||(t[5]=e=>u.value=e),length:r(k),class:"mt-6"},null,8,["modelValue","length"])):g("",!0)]),_:1}))}});export{ge as default};
//# sourceMappingURL=ProductListPage-C1uXbIrw.js.map
