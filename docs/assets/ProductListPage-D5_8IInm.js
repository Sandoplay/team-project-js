import{u as q}from"./products-BKFawb0D.js";import{u as A}from"./cart-CJEGNyfA.js";import{u as I}from"./favorites-D7N2Ia4P.js";import{e as z,a7 as E,d as p,l as M,a8 as G,j as H,a9 as J,B as n,R as u,S as l,y as a,u as r,aa as g,U as x,a1 as _,D as K,ab as O,a6 as b,F as Q}from"./vue-CsJlAH0e.js";import{c as F,f as R,V,h as C,i as W,j as X,a as T,k as Y,l as Z,m as ee,b as ae,n as te,d as le,e as P,o as oe,p as se,g as re,_ as ie}from"./index-BsPRUUIS.js";import"./vuetify-BpRWpd-r.js";const ne={class:"product-image-container"},ue={class:"d-flex align-center justify-space-between"},de={class:"text-h6"},me=z({__name:"ProductListPage",setup(ce){const w=G(),N=J(),d=q(),U=A(),B=I(),{paginatedProducts:$,loading:h,error:y,categories:j,totalPages:k}=E(d),m=p(""),c=p(""),o=p([0,1e3]),i=p(1);M(async()=>{const{title:s,category:t,minPrice:e,maxPrice:f,page:S}=w.query;s&&(m.value=s),t&&(c.value=t),e&&(o.value[0]=Number(e)),f&&(o.value[1]=Number(f)),S&&(i.value=Number(S)),await Promise.all([d.fetchProducts(),d.fetchCategories()])});const D=s=>{U.addToCart(s)},L=s=>{B.toggleFavorite(s)},v=()=>{N.push({query:{title:m.value||void 0,category:c.value||void 0,minPrice:o.value[0]||void 0,maxPrice:o.value[1]||void 0,page:i.value>1?i.value:void 0}}),d.updateFilter({title:m.value,category:c.value,minPrice:o.value[0],maxPrice:o.value[1],page:i.value})};return H(i,s=>{d.setPage(s),v()}),(s,t)=>(n(),u(re,null,{default:l(()=>[a(T,{class:"mb-6"},{default:l(()=>[a(F,null,{default:l(()=>[a(R,null,{default:l(()=>[a(V,{cols:"12",sm:"4"},{default:l(()=>[a(C,{modelValue:m.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>m.value=e),v],label:"Search products","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),a(V,{cols:"12",sm:"4"},{default:l(()=>[a(W,{modelValue:c.value,"onUpdate:modelValue":[t[1]||(t[1]=e=>c.value=e),v],items:r(j),label:"Category",variant:"outlined",density:"comfortable","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),a(V,{cols:"12",sm:"4"},{default:l(()=>[a(X,{modelValue:o.value,"onUpdate:modelValue":[t[4]||(t[4]=e=>o.value=e),v],min:0,max:1e3,step:10,label:"Price range","hide-details":""},{prepend:l(()=>[a(C,{modelValue:o.value[0],"onUpdate:modelValue":t[2]||(t[2]=e=>o.value[0]=e),type:"number",variant:"outlined",density:"comfortable","hide-details":"",style:{width:"100px"}},null,8,["modelValue"])]),append:l(()=>[a(C,{modelValue:o.value[1],"onUpdate:modelValue":t[3]||(t[3]=e=>o.value[1]=e),type:"number",variant:"outlined",density:"comfortable","hide-details":"",style:{width:"100px"}},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),r(h)?(n(),u(Y,{key:0,indeterminate:"",color:"primary",class:"d-flex mx-auto my-8"})):g("",!0),r(y)?(n(),u(Z,{key:1,type:"error",class:"mb-6"},{default:l(()=>[x(_(r(y)),1)]),_:1})):g("",!0),!r(h)&&!r(y)?(n(),u(R,{key:2},{default:l(()=>[(n(!0),K(Q,null,O(r($),e=>(n(),u(V,{key:e.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(()=>[a(T,{height:"100%"},{default:l(()=>[b("div",ne,[a(ee,{src:e.image,height:"200",class:"bg-grey-lighten-2",cover:!1,contain:!0},null,8,["src"])]),a(ae,{class:"text-truncate"},{default:l(()=>[x(_(e.title),1)]),_:2},1024),a(F,null,{default:l(()=>[b("div",ue,[b("span",de,"$"+_(e.price),1),a(te,{"model-value":e.rating.rate,readonly:"",density:"compact",size:"small"},null,8,["model-value"])])]),_:2},1024),a(le,null,{default:l(()=>[a(P,{variant:"text",to:`/products/${e.id}`},{default:l(()=>t[6]||(t[6]=[x(" Details ")])),_:2},1032,["to"]),a(oe),a(P,{icon:"mdi-heart",variant:"text",onClick:f=>L(e)},null,8,["onClick"]),a(P,{icon:"mdi-cart",variant:"text",onClick:f=>D(e)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):g("",!0),r(k)>1?(n(),u(se,{key:3,modelValue:i.value,"onUpdate:modelValue":t[5]||(t[5]=e=>i.value=e),length:r(k),class:"mt-6"},null,8,["modelValue","length"])):g("",!0)]),_:1}))}}),xe=ie(me,[["__scopeId","data-v-1432dcb8"]]);export{xe as default};
//# sourceMappingURL=ProductListPage-D5_8IInm.js.map
