{"version":3,"file":"ProductListPage-D5_8IInm.js","sources":["../../src/pages/ProductListPage.vue"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <!-- Filters -->\r\n    <v-card class=\"mb-6\">\r\n      <v-card-text>\r\n        <v-row>\r\n          <v-col cols=\"12\" sm=\"4\">\r\n            <v-text-field\r\n                v-model=\"searchTitle\"\r\n                label=\"Search products\"\r\n                prepend-inner-icon=\"mdi-magnify\"\r\n                variant=\"outlined\"\r\n                density=\"comfortable\"\r\n                hide-details\r\n                @update:model-value=\"updateFilters\"\r\n            />\r\n          </v-col>\r\n\r\n          <v-col cols=\"12\" sm=\"4\">\r\n            <v-select\r\n                v-model=\"selectedCategory\"\r\n                :items=\"categories\"\r\n                label=\"Category\"\r\n                variant=\"outlined\"\r\n                density=\"comfortable\"\r\n                hide-details\r\n                clearable\r\n                @update:model-value=\"updateFilters\"\r\n            />\r\n          </v-col>\r\n\r\n          <!-- Price range -->\r\n          <v-col cols=\"12\" sm=\"4\">\r\n            <v-range-slider\r\n                v-model=\"priceRange\"\r\n                :min=\"0\"\r\n                :max=\"1000\"\r\n                :step=\"10\"\r\n                label=\"Price range\"\r\n                hide-details\r\n                @update:model-value=\"updateFilters\"\r\n            >\r\n              <template #prepend>\r\n                <v-text-field\r\n                    v-model=\"priceRange[0]\"\r\n                    type=\"number\"\r\n                    variant=\"outlined\"\r\n                    density=\"comfortable\"\r\n                    hide-details\r\n                    style=\"width: 100px\"\r\n                />\r\n              </template>\r\n              <template #append>\r\n                <v-text-field\r\n                    v-model=\"priceRange[1]\"\r\n                    type=\"number\"\r\n                    variant=\"outlined\"\r\n                    density=\"comfortable\"\r\n                    hide-details\r\n                    style=\"width: 100px\"\r\n                />\r\n              </template>\r\n            </v-range-slider>\r\n          </v-col>\r\n        </v-row>\r\n      </v-card-text>\r\n    </v-card>\r\n\r\n    <!-- Loading state -->\r\n    <v-progress-circular\r\n        v-if=\"loading\"\r\n        indeterminate\r\n        color=\"primary\"\r\n        class=\"d-flex mx-auto my-8\"\r\n    />\r\n\r\n    <v-alert v-if=\"error\" type=\"error\" class=\"mb-6\">\r\n      {{ error }}\r\n    </v-alert>\r\n\r\n    <v-row v-if=\"!loading && !error\">\r\n      <v-col\r\n      v-for=\"product in paginatedProducts\"\r\n      :key=\"product.id\"\r\n      cols=\"12\"\r\n      sm=\"6\"\r\n      md=\"4\"\r\n      lg=\"3\"\r\n  >\r\n    <v-card height=\"100%\">\r\n      <div class=\"product-image-container\">\r\n        <v-img\r\n            :src=\"product.image\"\r\n            height=\"200\"\r\n            class=\"bg-grey-lighten-2\"\r\n            :cover=\"false\"\r\n            :contain=\"true\"\r\n        />\r\n      </div>\r\n\r\n      <v-card-title class=\"text-truncate\">\r\n        {{ product.title }}\r\n      </v-card-title>\r\n\r\n          <v-card-text>\r\n            <div class=\"d-flex align-center justify-space-between\">\r\n              <span class=\"text-h6\">${{ product.price }}</span>\r\n              <v-rating\r\n                  :model-value=\"product.rating.rate\"\r\n                  readonly\r\n                  density=\"compact\"\r\n                  size=\"small\"\r\n              />\r\n            </div>\r\n          </v-card-text>\r\n\r\n          <v-card-actions>\r\n            <v-btn variant=\"text\" :to=\"`/products/${product.id}`\">\r\n              Details\r\n            </v-btn>\r\n            <v-spacer />\r\n            <v-btn\r\n                icon=\"mdi-heart\"\r\n                variant=\"text\"\r\n                @click=\"toggleFavorite(product)\"\r\n            />\r\n            <v-btn icon=\"mdi-cart\" variant=\"text\" @click=\"addToCart(product)\" />\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <!-- Pagination -->\r\n    <v-pagination\r\n        v-if=\"totalPages > 1\"\r\n        v-model=\"currentPage\"\r\n        :length=\"totalPages\"\r\n        class=\"mt-6\"\r\n    />\r\n  </v-container>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, watch } from 'vue'\r\nimport { useProductsStore } from '@/stores/products'\r\nimport { useCartStore } from '@/stores/cart'\r\nimport { useFavoritesStore } from '@/stores/favorites'\r\nimport { storeToRefs } from 'pinia'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport type { Product } from '@/types/product'\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst productsStore = useProductsStore()\r\nconst cartStore = useCartStore()\r\nconst favoritesStore = useFavoritesStore()\r\n\r\nconst { paginatedProducts, loading, error, categories, totalPages } =\r\n    storeToRefs(productsStore)\r\n\r\nconst searchTitle = ref('')\r\nconst selectedCategory = ref('')\r\nconst priceRange = ref([0, 1000])\r\nconst currentPage = ref(1)\r\n\r\n// Initialize filters from URL\r\nonMounted(async () => {\r\n  const { title, category, minPrice, maxPrice, page } = route.query\r\n\r\n  if (title) searchTitle.value = title as string\r\n  if (category) selectedCategory.value = category as string\r\n  if (minPrice) priceRange.value[0] = Number(minPrice)\r\n  if (maxPrice) priceRange.value[1] = Number(maxPrice)\r\n  if (page) currentPage.value = Number(page)\r\n\r\n  await Promise.all([\r\n    productsStore.fetchProducts(),\r\n    productsStore.fetchCategories(),\r\n  ])\r\n})\r\n\r\n// Update URL when filters change\r\nconst addToCart = (product: Product) => {\r\n  cartStore.addToCart(product)\r\n}\r\n\r\nconst toggleFavorite = (product: Product) => {\r\n  favoritesStore.toggleFavorite(product)\r\n}\r\n\r\n// updateFilters залишається таким самим, оскільки тут немає параметра product\r\nconst updateFilters = () => {\r\n  router.push({\r\n    query: {\r\n      title: searchTitle.value || undefined,\r\n      category: selectedCategory.value || undefined,\r\n      minPrice: priceRange.value[0] || undefined,\r\n      maxPrice: priceRange.value[1] || undefined,\r\n      page: currentPage.value > 1 ? currentPage.value : undefined,\r\n    },\r\n  })\r\n\r\n  productsStore.updateFilter({\r\n    title: searchTitle.value,\r\n    category: selectedCategory.value,\r\n    minPrice: priceRange.value[0],\r\n    maxPrice: priceRange.value[1],\r\n    page: currentPage.value,\r\n  })\r\n}\r\n\r\n// Watch page changes\r\nwatch(currentPage, newPage => {\r\n  productsStore.setPage(newPage)\r\n  updateFilters()\r\n})\r\n</script>\r\n<style scoped>\r\n.product-image-container {\r\n  background: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 1rem;\r\n  height: 200px;\r\n}\r\n</style>\r\n"],"names":["route","useRoute","router","useRouter","productsStore","useProductsStore","cartStore","useCartStore","favoritesStore","useFavoritesStore","paginatedProducts","loading","error","categories","totalPages","storeToRefs","searchTitle","ref","selectedCategory","priceRange","currentPage","onMounted","title","category","minPrice","maxPrice","page","addToCart","product","toggleFavorite","updateFilters","watch","newPage"],"mappings":"yoBAuJA,MAAMA,EAAQC,EAAS,EACjBC,EAASC,EAAU,EACnBC,EAAgBC,EAAiB,EACjCC,EAAYC,EAAa,EACzBC,EAAiBC,EAAkB,EAEnC,CAAE,kBAAAC,EAAmB,QAAAC,EAAS,MAAAC,EAAO,WAAAC,EAAY,WAAAC,CAAW,EAC9DC,EAAYX,CAAa,EAEvBY,EAAcC,EAAI,EAAE,EACpBC,EAAmBD,EAAI,EAAE,EACzBE,EAAaF,EAAI,CAAC,EAAG,GAAI,CAAC,EAC1BG,EAAcH,EAAI,CAAC,EAGzBI,EAAU,SAAY,CACpB,KAAM,CAAE,MAAAC,EAAO,SAAAC,EAAU,SAAAC,EAAU,SAAAC,EAAU,KAAAC,CAAA,EAAS1B,EAAM,MAExDsB,MAAmB,MAAQA,GAC3BC,MAA2B,MAAQA,GACnCC,IAAqBL,EAAA,MAAM,CAAC,EAAI,OAAOK,CAAQ,GAC/CC,IAAqBN,EAAA,MAAM,CAAC,EAAI,OAAOM,CAAQ,GAC/CC,IAAMN,EAAY,MAAQ,OAAOM,CAAI,GAEzC,MAAM,QAAQ,IAAI,CAChBtB,EAAc,cAAc,EAC5BA,EAAc,gBAAgB,CAAA,CAC/B,CAAA,CACF,EAGK,MAAAuB,EAAaC,GAAqB,CACtCtB,EAAU,UAAUsB,CAAO,CAC7B,EAEMC,EAAkBD,GAAqB,CAC3CpB,EAAe,eAAeoB,CAAO,CACvC,EAGME,EAAgB,IAAM,CAC1B5B,EAAO,KAAK,CACV,MAAO,CACL,MAAOc,EAAY,OAAS,OAC5B,SAAUE,EAAiB,OAAS,OACpC,SAAUC,EAAW,MAAM,CAAC,GAAK,OACjC,SAAUA,EAAW,MAAM,CAAC,GAAK,OACjC,KAAMC,EAAY,MAAQ,EAAIA,EAAY,MAAQ,MAAA,CACpD,CACD,EAEDhB,EAAc,aAAa,CACzB,MAAOY,EAAY,MACnB,SAAUE,EAAiB,MAC3B,SAAUC,EAAW,MAAM,CAAC,EAC5B,SAAUA,EAAW,MAAM,CAAC,EAC5B,KAAMC,EAAY,KAAA,CACnB,CACH,EAGA,OAAAW,EAAMX,EAAwBY,GAAA,CAC5B5B,EAAc,QAAQ4B,CAAO,EACfF,EAAA,CAAA,CACf"}